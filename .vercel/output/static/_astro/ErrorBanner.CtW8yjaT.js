import{r as j}from"./index.DiEladB3.js";import{j as r}from"./jsx-runtime.D_zvdyIk.js";var A=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ie={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Me=class{#e=Ie;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},I=new Me;function Fe(e){setTimeout(e,0)}var M=typeof window>"u"||"Deno"in globalThis;function S(){}function Qe(e,t){return typeof e=="function"?e(t):e}function z(e){return typeof e=="number"&&e>=0&&e!==1/0}function ve(e,t){return Math.max(e+(t||0)-Date.now(),0)}function P(e,t){return typeof e=="function"?e(t):e}function O(e,t){return typeof e=="function"?e(t):e}function re(e,t){const{type:s="all",exact:i,fetchStatus:n,predicate:o,queryKey:l,stale:a}=e;if(l){if(i){if(t.queryHash!==Y(l,t.options))return!1}else if(!T(t.queryKey,l))return!1}if(s!=="all"){const u=t.isActive();if(s==="active"&&!u||s==="inactive"&&u)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||n&&n!==t.state.fetchStatus||o&&!o(t))}function ie(e,t){const{exact:s,status:i,predicate:n,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(s){if(Q(t.options.mutationKey)!==Q(o))return!1}else if(!T(t.options.mutationKey,o))return!1}return!(i&&t.state.status!==i||n&&!n(t))}function Y(e,t){return(t?.queryKeyHashFn||Q)(e)}function Q(e){return JSON.stringify(e,(t,s)=>B(s)?Object.keys(s).sort().reduce((i,n)=>(i[n]=s[n],i),{}):s)}function T(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(s=>T(e[s],t[s])):!1}var Te=Object.prototype.hasOwnProperty;function we(e,t,s=0){if(e===t)return e;if(s>500)return t;const i=ne(e)&&ne(t);if(!i&&!(B(e)&&B(t)))return t;const o=(i?e:Object.keys(e)).length,l=i?t:Object.keys(t),a=l.length,u=i?new Array(a):{};let d=0;for(let c=0;c<a;c++){const p=i?c:l[c],h=e[p],y=t[p];if(h===y){u[p]=h,(i?c<o:Te.call(e,p))&&d++;continue}if(h===null||y===null||typeof h!="object"||typeof y!="object"){u[p]=y;continue}const m=we(h,y,s+1);u[p]=m,m===h&&d++}return o===a&&d===o?e:u}function K(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function ne(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function B(e){if(!ae(e))return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!ae(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function ae(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ae(e){return new Promise(t=>{I.setTimeout(t,e)})}function $(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?we(e,t):t}function De(e,t,s=0){const i=[...e,t];return s&&i.length>s?i.slice(1):i}function ke(e,t,s=0){const i=[t,...e];return s&&i.length>s?i.slice(0,-1):i}var Z=Symbol();function je(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===Z?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Se(e,t){return typeof e=="function"?e(...t):!!e}function Le(e,t,s){let i=!1,n;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(n??=t(),i||(i=!0,n.aborted?s():n.addEventListener("abort",s,{once:!0})),n)}),e}var Ue=class extends A{#e;#t;#s;constructor(){super(),this.#s=e=>{if(!M&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#s=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},X=new Ue;function H(){let e,t;const s=new Promise((n,o)=>{e=n,t=o});s.status="pending",s.catch(()=>{});function i(n){Object.assign(s,n),delete s.resolve,delete s.reject}return s.resolve=n=>{i({status:"fulfilled",value:n}),e(n)},s.reject=n=>{i({status:"rejected",reason:n}),t(n)},s}var qe=Fe;function _e(){let e=[],t=0,s=a=>{a()},i=a=>{a()},n=qe;const o=a=>{t?e.push(a):n(()=>{s(a)})},l=()=>{const a=e;e=[],a.length&&n(()=>{i(()=>{a.forEach(u=>{s(u)})})})};return{batch:a=>{let u;t++;try{u=a()}finally{t--,t||l()}return u},batchCalls:a=>(...u)=>{o(()=>{a(...u)})},schedule:o,setNotifyFunction:a=>{s=a},setBatchNotifyFunction:a=>{i=a},setScheduler:a=>{n=a}}}var w=_e(),ze=class extends A{#e=!0;#t;#s;constructor(){super(),this.#s=e=>{if(!M&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#s=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(s=>{s(e)}))}isOnline(){return this.#e}},q=new ze;function Ke(e){return Math.min(1e3*2**e,3e4)}function Ce(e){return(e??"online")==="online"?q.isOnline():!0}var G=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Ne(e){let t=!1,s=0,i;const n=H(),o=()=>n.status!=="pending",l=f=>{if(!o()){const b=new G(f);h(b),e.onCancel?.(b)}},a=()=>{t=!0},u=()=>{t=!1},d=()=>X.isFocused()&&(e.networkMode==="always"||q.isOnline())&&e.canRun(),c=()=>Ce(e.networkMode)&&e.canRun(),p=f=>{o()||(i?.(),n.resolve(f))},h=f=>{o()||(i?.(),n.reject(f))},y=()=>new Promise(f=>{i=b=>{(o()||d())&&f(b)},e.onPause?.()}).then(()=>{i=void 0,o()||e.onContinue?.()}),m=()=>{if(o())return;let f;const b=s===0?e.initialPromise:void 0;try{f=b??e.fn()}catch(v){f=Promise.reject(v)}Promise.resolve(f).then(p).catch(v=>{if(o())return;const g=e.retry??(M?0:3),x=e.retryDelay??Ke,C=typeof x=="function"?x(s,v):x,R=g===!0||typeof g=="number"&&s<g||typeof g=="function"&&g(s,v);if(t||!R){h(v);return}s++,e.onFail?.(s,v),Ae(C).then(()=>d()?void 0:y()).then(()=>{t?h(v):m()})})};return{promise:n,status:()=>n.status,cancel:l,continue:()=>(i?.(),n),cancelRetry:a,continueRetry:u,canStart:c,start:()=>(c()?m():y().then(m),n)}}var Oe=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),z(this.gcTime)&&(this.#e=I.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(M?1/0:300*1e3))}clearGcTimeout(){this.#e&&(I.clearTimeout(this.#e),this.#e=void 0)}},Be=class extends Oe{#e;#t;#s;#i;#r;#o;#a;constructor(e){super(),this.#a=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#i=e.client,this.#s=this.#i.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=le(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){if(this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=le(this.options);t.data!==void 0&&(this.setState(oe(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(e,t){const s=$(this.state.data,e,this.options);return this.#n({data:s,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),s}setState(e,t){this.#n({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#r?.promise;return this.#r?.cancel(e),t?t.then(S).catch(S):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>O(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Z||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>P(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!ve(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#r&&(this.#a?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#n({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const a=this.observers.find(u=>u.options.queryFn);a&&this.setOptions(a.options)}const s=new AbortController,i=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(this.#a=!0,s.signal)})},n=()=>{const a=je(this.options,t),d=(()=>{const c={client:this.#i,queryKey:this.queryKey,meta:this.meta};return i(c),c})();return this.#a=!1,this.options.persister?this.options.persister(a,d,this):a(d)},l=(()=>{const a={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:n};return i(a),a})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#n({type:"fetch",meta:l.fetchOptions?.meta}),this.#r=Ne({initialPromise:t?.initialPromise,fn:l.fetchFn,onCancel:a=>{a instanceof G&&a.revert&&this.setState({...this.#t,fetchStatus:"idle"}),s.abort()},onFail:(a,u)=>{this.#n({type:"failed",failureCount:a,error:u})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const a=await this.#r.start();if(a===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(a),this.#s.config.onSuccess?.(a,this),this.#s.config.onSettled?.(a,this.state.error,this),a}catch(a){if(a instanceof G){if(a.silent)return this.#r.promise;if(a.revert){if(this.state.data===void 0)throw a;return this.state.data}}throw this.#n({type:"error",error:a}),this.#s.config.onError?.(a,this),this.#s.config.onSettled?.(this.state.data,a,this),a}finally{this.scheduleGc()}}#n(e){const t=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Re(s.data,this.options),fetchMeta:e.meta??null};case"success":const i={...s,...oe(e.data,e.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?i:void 0,i;case"error":const n=e.error;return{...s,error:n,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=t(this.state),w.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:e})})}};function Re(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ce(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function oe(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function le(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=t!==void 0,i=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var $e=class extends A{constructor(e,t){super(),this.options=t,this.#e=e,this.#n=null,this.#a=H(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#s=void 0;#i=void 0;#r;#o;#a;#n;#m;#d;#f;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),ce(this.#t,this.options)?this.#h():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return W(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return W(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#w(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,s=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof O(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#j(),this.#t.setOptions(this.options),t._defaulted&&!K(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&ue(this.#t,s,this.options,t)&&this.#h(),this.updateResult(),i&&(this.#t!==s||O(this.options.enabled,this.#t)!==O(t.enabled,this.#t)||P(this.options.staleTime,this.#t)!==P(t.staleTime,this.#t))&&this.#y();const n=this.#g();i&&(this.#t!==s||O(this.options.enabled,this.#t)!==O(t.enabled,this.#t)||n!==this.#l)&&this.#x(n)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),s=this.createResult(t,e);return Ge(this,s)&&(this.#i=s,this.#o=this.options,this.#r=this.#t.state),s}getCurrentResult(){return this.#i}trackResult(e,t){return new Proxy(e,{get:(s,i)=>(this.trackProp(i),t?.(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,i))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),s=this.#e.getQueryCache().build(this.#e,t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return this.#h({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#i))}#h(e){this.#j();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(S)),t}#y(){this.#v();const e=P(this.options.staleTime,this.#t);if(M||this.#i.isStale||!z(e))return;const s=ve(this.#i.dataUpdatedAt,e)+1;this.#c=I.setTimeout(()=>{this.#i.isStale||this.updateResult()},s)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#x(e){this.#w(),this.#l=e,!(M||O(this.options.enabled,this.#t)===!1||!z(this.#l)||this.#l===0)&&(this.#u=I.setInterval(()=>{(this.options.refetchIntervalInBackground||X.isFocused())&&this.#h()},this.#l))}#b(){this.#y(),this.#x(this.#g())}#v(){this.#c&&(I.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#u&&(I.clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const s=this.#t,i=this.options,n=this.#i,o=this.#r,l=this.#o,u=e!==s?e.state:this.#s,{state:d}=e;let c={...d},p=!1,h;if(t._optimisticResults){const N=this.hasListeners(),F=!N&&ce(e,t),D=N&&ue(e,s,t,i);(F||D)&&(c={...c,...Re(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(c.fetchStatus="idle")}let{error:y,errorUpdatedAt:m,status:f}=c;h=c.data;let b=!1;if(t.placeholderData!==void 0&&h===void 0&&f==="pending"){let N;n?.isPlaceholderData&&t.placeholderData===l?.placeholderData?(N=n.data,b=!0):N=typeof t.placeholderData=="function"?t.placeholderData(this.#f?.state.data,this.#f):t.placeholderData,N!==void 0&&(f="success",h=$(n?.data,N,t),p=!0)}if(t.select&&h!==void 0&&!b)if(n&&h===o?.data&&t.select===this.#m)h=this.#d;else try{this.#m=t.select,h=t.select(h),h=$(n?.data,h,t),this.#d=h,this.#n=null}catch(N){this.#n=N}this.#n&&(y=this.#n,h=this.#d,m=Date.now(),f="error");const v=c.fetchStatus==="fetching",g=f==="pending",x=f==="error",C=g&&v,R=h!==void 0,E={status:f,fetchStatus:c.fetchStatus,isPending:g,isSuccess:f==="success",isError:x,isInitialLoading:C,isLoading:C,data:h,dataUpdatedAt:c.dataUpdatedAt,error:y,errorUpdatedAt:m,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>u.dataUpdateCount||c.errorUpdateCount>u.errorUpdateCount,isFetching:v,isRefetching:v&&!g,isLoadingError:x&&!R,isPaused:c.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:x&&R,isStale:ee(e,t),refetch:this.refetch,promise:this.#a,isEnabled:O(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const N=E.data!==void 0,F=E.status==="error"&&!N,D=L=>{F?L.reject(E.error):N&&L.resolve(E.data)},se=()=>{const L=this.#a=E.promise=H();D(L)},k=this.#a;switch(k.status){case"pending":e.queryHash===s.queryHash&&D(k);break;case"fulfilled":(F||E.data!==k.value)&&se();break;case"rejected":(!F||E.error!==k.reason)&&se();break}}return E}updateResult(){const e=this.#i,t=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#o=this.options,this.#r.data!==void 0&&(this.#f=this.#t),K(t,e))return;this.#i=t;const s=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,n=typeof i=="function"?i():i;if(n==="all"||!n&&!this.#p.size)return!0;const o=new Set(n??this.#p);return this.options.throwOnError&&o.add("error"),Object.keys(this.#i).some(l=>{const a=l;return this.#i[a]!==e[a]&&o.has(a)})};this.#S({listeners:s()})}#j(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#s=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#S(e){w.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#i)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function He(e,t){return O(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function ce(e,t){return He(e,t)||e.state.data!==void 0&&W(e,t,t.refetchOnMount)}function W(e,t,s){if(O(t.enabled,e)!==!1&&P(t.staleTime,e)!=="static"){const i=typeof s=="function"?s(e):s;return i==="always"||i!==!1&&ee(e,t)}return!1}function ue(e,t,s,i){return(e!==t||O(i.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&ee(e,s)}function ee(e,t){return O(t.enabled,e)!==!1&&e.isStaleByTime(P(t.staleTime,e))}function Ge(e,t){return!K(e.getCurrentResult(),t)}function he(e){return{onFetch:(t,s)=>{const i=t.options,n=t.fetchOptions?.meta?.fetchMore?.direction,o=t.state.data?.pages||[],l=t.state.data?.pageParams||[];let a={pages:[],pageParams:[]},u=0;const d=async()=>{let c=!1;const p=m=>{Le(m,()=>t.signal,()=>c=!0)},h=je(t.options,t.fetchOptions),y=async(m,f,b)=>{if(c)return Promise.reject();if(f==null&&m.pages.length)return Promise.resolve(m);const g=(()=>{const _={client:t.client,queryKey:t.queryKey,pageParam:f,direction:b?"backward":"forward",meta:t.options.meta};return p(_),_})(),x=await h(g),{maxPages:C}=t.options,R=b?ke:De;return{pages:R(m.pages,x,C),pageParams:R(m.pageParams,f,C)}};if(n&&o.length){const m=n==="backward",f=m?We:de,b={pages:o,pageParams:l},v=f(i,b);a=await y(b,v,m)}else{const m=e??o.length;do{const f=u===0?l[0]??i.initialPageParam:de(i,a);if(u>0&&f==null)break;a=await y(a,f),u++}while(u<m)}return a};t.options.persister?t.fetchFn=()=>t.options.persister?.(d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s):t.fetchFn=d}}}function de(e,{pages:t,pageParams:s}){const i=t.length-1;return t.length>0?e.getNextPageParam(t[i],t,s[i],s):void 0}function We(e,{pages:t,pageParams:s}){return t.length>0?e.getPreviousPageParam?.(t[0],t,s[0],s):void 0}var Ve=class extends Oe{#e;#t;#s;#i;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#s=e.mutationCache,this.#t=[],this.state=e.state||Je(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#s.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#s.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#r({type:"continue"})},s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=Ne({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(new Error("No mutationFn found")),onFail:(o,l)=>{this.#r({type:"failed",failureCount:o,error:l})},onPause:()=>{this.#r({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#s.canRun(this)});const i=this.state.status==="pending",n=!this.#i.canStart();try{if(i)t();else{this.#r({type:"pending",variables:e,isPaused:n}),this.#s.config.onMutate&&await this.#s.config.onMutate(e,this,s);const l=await this.options.onMutate?.(e,s);l!==this.state.context&&this.#r({type:"pending",context:l,variables:e,isPaused:n})}const o=await this.#i.start();return await this.#s.config.onSuccess?.(o,e,this.state.context,this,s),await this.options.onSuccess?.(o,e,this.state.context,s),await this.#s.config.onSettled?.(o,null,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(o,null,e,this.state.context,s),this.#r({type:"success",data:o}),o}catch(o){try{await this.#s.config.onError?.(o,e,this.state.context,this,s)}catch(l){Promise.reject(l)}try{await this.options.onError?.(o,e,this.state.context,s)}catch(l){Promise.reject(l)}try{await this.#s.config.onSettled?.(void 0,o,this.state.variables,this.state.context,this,s)}catch(l){Promise.reject(l)}try{await this.options.onSettled?.(void 0,o,e,this.state.context,s)}catch(l){Promise.reject(l)}throw this.#r({type:"error",error:o}),o}finally{this.#s.runNext(this)}}#r(e){const t=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),w.batch(()=>{this.#t.forEach(s=>{s.onMutationUpdate(e)}),this.#s.notify({mutation:this,type:"updated",action:e})})}};function Je(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ye=class extends A{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#s=0}#e;#t;#s;build(e,t,s){const i=new Ve({client:e,mutationCache:this,mutationId:++this.#s,options:e.defaultMutationOptions(t),state:s});return this.add(i),i}add(e){this.#e.add(e);const t=U(e);if(typeof t=="string"){const s=this.#t.get(t);s?s.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=U(e);if(typeof t=="string"){const s=this.#t.get(t);if(s)if(s.length>1){const i=s.indexOf(e);i!==-1&&s.splice(i,1)}else s[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=U(e);if(typeof t=="string"){const i=this.#t.get(t)?.find(n=>n.state.status==="pending");return!i||i===e}else return!0}runNext(e){const t=U(e);return typeof t=="string"?this.#t.get(t)?.find(i=>i!==e&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){w.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(s=>ie(t,s))}findAll(e={}){return this.getAll().filter(t=>ie(e,t))}notify(e){w.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return w.batch(()=>Promise.all(e.map(t=>t.continue().catch(S))))}};function U(e){return e.options.scope?.id}var Ze=class extends A{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,s){const i=t.queryKey,n=t.queryHash??Y(i,t);let o=this.get(n);return o||(o=new Be({client:e,queryKey:i,queryHash:n,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){w.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(s=>re(t,s))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(s=>re(e,s)):t}notify(e){w.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){w.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){w.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ot=class{#e;#t;#s;#i;#r;#o;#a;#n;constructor(e={}){this.#e=e.queryCache||new Ze,this.#t=e.mutationCache||new Ye,this.#s=e.defaultOptions||{},this.#i=new Map,this.#r=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=X.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#n=q.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#n?.(),this.#n=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=this.#e.build(this,t),i=s.state.data;return i===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(P(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(i))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:s})=>{const i=s.data;return[t,i]})}setQueryData(e,t,s){const i=this.defaultQueryOptions({queryKey:e}),o=this.#e.get(i.queryHash)?.state.data,l=Qe(t,o);if(l!==void 0)return this.#e.build(this,i).setData(l,{...s,manual:!0})}setQueriesData(e,t,s){return w.batch(()=>this.#e.findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,t,s)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;w.batch(()=>{t.findAll(e).forEach(s=>{t.remove(s)})})}resetQueries(e,t){const s=this.#e;return w.batch(()=>(s.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const s={revert:!0,...t},i=w.batch(()=>this.#e.findAll(e).map(n=>n.cancel(s)));return Promise.all(i).then(S).catch(S)}invalidateQueries(e,t={}){return w.batch(()=>(this.#e.findAll(e).forEach(s=>{s.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const s={...t,cancelRefetch:t.cancelRefetch??!0},i=w.batch(()=>this.#e.findAll(e).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let o=n.fetch(void 0,s);return s.throwOnError||(o=o.catch(S)),n.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(i).then(S)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const s=this.#e.build(this,t);return s.isStaleByTime(P(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(S).catch(S)}fetchInfiniteQuery(e){return e.behavior=he(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(S).catch(S)}ensureInfiniteQueryData(e){return e.behavior=he(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return q.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#s}setDefaultOptions(e){this.#s=e}setQueryDefaults(e,t){this.#i.set(Q(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#i.values()],s={};return t.forEach(i=>{T(e,i.queryKey)&&Object.assign(s,i.defaultOptions)}),s}setMutationDefaults(e,t){this.#r.set(Q(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#r.values()],s={};return t.forEach(i=>{T(e,i.mutationKey)&&Object.assign(s,i.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#s.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Y(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Z&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#s.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Ee=j.createContext(void 0),Xe=e=>{const t=j.useContext(Ee);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Rt=({client:e,children:t})=>(j.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(Ee.Provider,{value:e,children:t})),Pe=j.createContext(!1),et=()=>j.useContext(Pe);Pe.Provider;function tt(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var st=j.createContext(tt()),rt=()=>j.useContext(st),it=(e,t,s)=>{const i=s?.state.error&&typeof e.throwOnError=="function"?Se(e.throwOnError,[s.state.error,s]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||i)&&(t.isReset()||(e.retryOnMount=!1))},nt=e=>{j.useEffect(()=>{e.clearReset()},[e])},at=({result:e,errorResetBoundary:t,throwOnError:s,query:i,suspense:n})=>e.isError&&!t.isReset()&&!e.isFetching&&i&&(n&&e.data===void 0||Se(s,[e.error,i])),ot=e=>{if(e.suspense){const s=n=>n==="static"?n:Math.max(n??1e3,1e3),i=e.staleTime;e.staleTime=typeof i=="function"?(...n)=>s(i(...n)):s(i),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},lt=(e,t)=>e.isLoading&&e.isFetching&&!t,ct=(e,t)=>e?.suspense&&t.isPending,fe=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function ut(e,t,s){const i=et(),n=rt(),o=Xe(),l=o.defaultQueryOptions(e);o.getDefaultOptions().queries?._experimental_beforeQuery?.(l);const a=o.getQueryCache().get(l.queryHash);l._optimisticResults=i?"isRestoring":"optimistic",ot(l),it(l,n,a),nt(n);const u=!o.getQueryCache().get(l.queryHash),[d]=j.useState(()=>new t(o,l)),c=d.getOptimisticResult(l),p=!i&&e.subscribed!==!1;if(j.useSyncExternalStore(j.useCallback(h=>{const y=p?d.subscribe(w.batchCalls(h)):S;return d.updateResult(),y},[d,p]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),j.useEffect(()=>{d.setOptions(l)},[l,d]),ct(l,c))throw fe(l,d,n);if(at({result:c,errorResetBoundary:n,throwOnError:l.throwOnError,query:a,suspense:l.suspense}))throw c.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(l,c),l.experimental_prefetchInRender&&!M&&lt(c,i)&&(u?fe(l,d,n):a?.promise)?.catch(S).finally(()=>{d.updateResult()}),l.notifyOnChangeProps?c:d.trackResult(c)}function Et(e,t){return ut(e,$e)}function V({className:e="w-4 h-4"}){return r.jsx("svg",{className:e,viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"})})}function J({className:e="w-4 h-4"}){return r.jsx("svg",{className:e,viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"})})}function ht({className:e="w-4 h-4"}){return r.jsx("svg",{className:e,viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}function dt({className:e="w-4 h-4"}){return r.jsx("svg",{className:e,viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}function Pt({className:e="w-4 h-4"}){return r.jsx("svg",{className:e,viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})})}function ft({className:e="w-4 h-4"}){return r.jsx("svg",{className:e,viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M14 2H6L2 8l4 2-4 6h5l1 6 4-8h4l-2-6 4-4-4-2z"})})}function pt({className:e="w-4 h-4"}){return r.jsx("svg",{className:e,viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67zM11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.59 2.65.59 4.04 0 2.65-2.15 4.8-4.8 4.8z"})})}function mt({severity:e,label:t,probability:s,reasons:i}){if(e==="none")return null;const n=e==="confirmed",o=n?"bg-red-600 text-white border-red-400":"bg-yellow-600/90 text-white border-yellow-400",l=n?r.jsx(V,{className:"w-2.5 h-2.5"}):r.jsx(J,{className:"w-2.5 h-2.5"});return r.jsxs("div",{className:"relative group inline-flex",children:[r.jsxs("span",{className:`inline-flex items-center gap-1 text-[10px] font-bold px-1.5 py-0.5 rounded border ${o} cursor-help leading-tight`,children:[l,n?t:`${t} (${s}%)`]}),r.jsx("div",{className:"absolute right-0 top-full mt-1 z-50 hidden group-hover:block min-w-[240px]",children:r.jsxs("div",{className:"bg-gray-900 border border-gray-600 rounded-lg shadow-xl p-3 text-sm text-gray-300 space-y-1.5",children:[r.jsxs("div",{className:"font-bold text-white mb-1.5 flex items-center gap-1.5",children:[l,n?"Smurf detectado":"Posible smurf"]}),i.map((a,u)=>r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-gray-500 shrink-0 mt-0.5",children:"‚Ä¢"}),r.jsx("span",{children:a})]},u))]})})]})}const te="https://ddragon.leagueoflegends.com";function pe(e,t){return`${te}/cdn/${e}/img/champion/${t}`}function me(e,t){return`${te}/cdn/${e}/img/spell/${t}`}function ye(e){return`${te}/cdn/img/${e}`}function yt(e){return`https://raw.communitydragon.org/latest/plugins/rcp-fe-lol-static-assets/global/default/images/ranked-mini-crests/${e.toLowerCase()}.png`}const gt={IRON:"text-gray-400",BRONZE:"text-amber-600",SILVER:"text-gray-300",GOLD:"text-yellow-400",PLATINUM:"text-teal-300",EMERALD:"text-emerald-400",DIAMOND:"text-blue-300",MASTER:"text-purple-400",GRANDMASTER:"text-red-400",CHALLENGER:"text-amber-300"};function ge(e){return e>=60?"text-red-400":e>=55?"text-yellow-400":e>=50?"text-emerald-400":"text-gray-400"}function xt(e){return e?e.severity==="confirmed"?"border-red-500/60 ring-1 ring-red-500/20 bg-red-950/20":e.severity==="possible"?"border-yellow-500/40 ring-1 ring-yellow-500/15 bg-yellow-950/10":"border-gray-700/60":"border-gray-700/60"}function bt(e){return e?e.wins+e.losses>300:!1}function vt(e){if(!e)return!1;const t=e.wins+e.losses;return t<10?!1:Math.round(e.wins/t*100)<46}function wt({participant:e,ddragon:t,smurfData:s,summary:i,batchLoading:n}){const o=t.champions[String(e.championId)],l=t.spells[String(e.spell1Id)],a=t.spells[String(e.spell2Id)],u=e.perkKeystone!=null?t.runeData?.[String(e.perkKeystone)]:void 0,d=e.perkSubStyle!=null?t.runes?.[String(e.perkSubStyle)]:void 0,c=i?.soloQueue??i?.flexQueue??null,p=c?c.wins+c.losses:0,h=p>0?Math.round(c.wins/p*100):null,y=i?.summonerLevel??null,m=i?.championWinrate!==void 0&&i?.championWinrate!==null?Math.round(i.championWinrate*100):null,f=i?.championSampleSize??0,b=!n&&bt(c),v=!n&&vt(c);return r.jsxs("div",{className:`relative rounded-xl border backdrop-blur-sm bg-gray-800/80 p-5 flex flex-col gap-4 w-full min-h-[280px] transition-all ${xt(s)}`,"data-smurf-severity":s?.severity??"none",children:[y!==null&&!n&&r.jsxs("div",{className:"absolute top-2 left-2 inline-flex items-center gap-1 px-1.5 py-0.5 rounded bg-gray-900/80 border border-gray-600/60 backdrop-blur-sm z-10",children:[r.jsx(dt,{className:"w-3 h-3 text-gray-400"}),r.jsx("span",{className:"text-[10px] font-semibold text-gray-300",children:y})]}),r.jsxs("div",{className:"absolute top-2 right-2 flex flex-col items-end gap-1 z-10",children:[s&&s.severity!=="none"&&!n&&r.jsx(mt,{severity:s.severity,label:s.label,probability:s.probability,reasons:s.reasons}),b&&r.jsxs("span",{className:"inline-flex items-center gap-1 text-[10px] font-bold px-1.5 py-0.5 rounded border bg-orange-600/90 text-white border-orange-400 leading-tight",title:`${p} rankeds jugadas`,children:[r.jsx(pt,{className:"w-2.5 h-2.5"}),"ELO QUEMADO"]}),v&&r.jsxs("span",{className:"inline-flex items-center gap-1 text-[10px] font-bold px-1.5 py-0.5 rounded border bg-stone-600/90 text-white border-stone-400 leading-tight",title:`${h}% WR en ranked`,children:[r.jsx(ft,{className:"w-2.5 h-2.5"}),"ESCOMBRO"]})]}),r.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[r.jsxs("div",{className:"relative shrink-0",children:[o?r.jsx("img",{src:pe(t.version,o.image),alt:o.name,className:"w-16 h-16 rounded-xl ring-2 ring-gray-600",loading:"lazy"}):r.jsx("div",{className:"w-16 h-16 rounded-xl bg-gray-700 flex items-center justify-center text-gray-500 text-sm",children:"?"}),r.jsxs("div",{className:"absolute -bottom-1 -right-1 flex gap-px",children:[l&&r.jsx("img",{src:me(t.version,l.image),alt:l.name,className:"w-5 h-5 rounded-sm ring-1 ring-gray-900",loading:"lazy"}),a&&r.jsx("img",{src:me(t.version,a.image),alt:a.name,className:"w-5 h-5 rounded-sm ring-1 ring-gray-900",loading:"lazy"})]})]}),r.jsxs("div",{className:"flex flex-col gap-0.5 shrink-0",children:[u?r.jsx("img",{src:ye(u.icon),alt:u.name,title:u.name,className:"w-7 h-7 rounded-full bg-gray-900/60 p-0.5",loading:"lazy"}):r.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-700/40"}),d?r.jsx("img",{src:ye(d.icon),alt:d.name,title:d.name,className:"w-5 h-5 rounded-full bg-gray-900/60 p-0.5 self-center opacity-70",loading:"lazy"}):r.jsx("div",{className:"w-5 h-5 rounded-full bg-gray-700/30 self-center"})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[(()=>{const g=e.riotId||"Unknown",x=g.lastIndexOf("#"),C=x>0?g.slice(0,x):g,R=x>0?g.slice(x):"";return r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"font-bold text-white text-sm leading-snug block break-words",children:C}),R&&r.jsx("span",{className:"text-[11px] text-gray-500 block mt-0.5",children:R})]})})(),n&&r.jsx("span",{className:"w-16 h-4 bg-gray-700 rounded animate-pulse inline-block mt-1"})]})]}),n?r.jsxs("div",{className:"flex items-center gap-3 animate-pulse",children:[r.jsx("div",{className:"w-12 h-12 bg-gray-700 rounded"}),r.jsx("div",{className:"h-5 w-20 bg-gray-700 rounded"}),r.jsx("div",{className:"h-8 w-14 bg-gray-700 rounded ml-auto"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center gap-3",children:[c?r.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[r.jsx("img",{src:yt(c.tier),alt:c.tier,className:"w-12 h-12 object-contain shrink-0",loading:"lazy"}),r.jsxs("div",{className:"min-w-0",children:[r.jsxs("div",{className:`text-sm font-bold leading-tight ${gt[c.tier]??"text-gray-400"}`,children:[c.tier," ",c.rank]}),r.jsxs("div",{className:"text-xs text-gray-400 mt-0.5",children:[c.leaguePoints," LP"]})]})]}):r.jsxs("div",{className:"flex items-center gap-2 flex-1 text-gray-600 text-sm",children:[r.jsx("div",{className:"w-12 h-12 rounded bg-gray-700/50 flex items-center justify-center",children:r.jsx("span",{className:"text-gray-600 text-sm",children:"‚Äî"})}),r.jsx("span",{children:"Unranked"})]}),r.jsx("div",{className:"text-right shrink-0",children:h!==null?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:`text-2xl font-extrabold leading-none ${ge(h)}`,children:[h,"%"]}),r.jsx("div",{className:"text-[10px] text-gray-500 uppercase tracking-wider mt-0.5",children:"Ranked"})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"text-2xl font-extrabold leading-none text-gray-600",children:"‚Äî"}),r.jsx("div",{className:"text-[10px] text-gray-500 uppercase tracking-wider mt-0.5",children:"Ranked"})]})})]}),m!==null&&f>=3&&r.jsxs("div",{className:"flex items-center gap-2 px-2.5 py-1.5 rounded-lg bg-blue-950/30 border border-blue-500/15",children:[o&&r.jsx("img",{src:pe(t.version,o.image),alt:o.name,className:"w-5 h-5 rounded",loading:"lazy"}),r.jsxs("span",{className:`text-sm font-bold ${ge(m)}`,children:[m,"%"]}),r.jsxs("span",{className:"text-[10px] text-gray-500",children:[f," partidas"]})]})]}),c&&!n&&r.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-2.5 border-t border-gray-700/40 pt-2.5 mt-auto",children:[r.jsxs("span",{className:"text-emerald-400 font-semibold",children:[c.wins,"W"]}),r.jsx("span",{className:"text-gray-600",children:"/"}),r.jsxs("span",{className:"text-red-400 font-semibold",children:[c.losses,"L"]}),r.jsxs("span",{className:"text-gray-500 ml-auto",children:[p," jugadas"]})]})]})}function xe(e,t){let s=0,i=0;for(const n of e){const o=t.get(n);o&&(o.smurf.severity==="confirmed"?s++:o.smurf.severity==="possible"&&i++)}return{confirmed:s,possible:i}}function be({label:e,color:t,participants:s,ddragon:i,summaries:n,loading:o}){const l=t==="blue"?"border-blue-500":"border-red-500",a=t==="blue"?"text-blue-400":"text-red-400",u=t==="blue"?"bg-blue-500":"bg-red-500";return r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("span",{className:`w-3 h-3 rounded-full ${u}`}),r.jsx("h3",{className:`text-base font-bold uppercase tracking-wider ${a}`,children:e}),r.jsx("div",{className:`flex-1 h-px ${l} opacity-30`})]}),r.jsx("div",{className:"grid grid-cols-5 gap-3",children:s.map(d=>{const c=n.get(d.puuid),p=c?{summonerLevel:c.summonerLevel,profileIconId:c.profileIconId,soloQueue:c.soloQueue,flexQueue:c.flexQueue,championWinrate:c.championWinrate??null,championSampleSize:c.championSampleSize??0}:void 0;return r.jsx(wt,{participant:d,ddragon:i,smurfData:c?.smurf,summary:p,batchLoading:o},d.puuid)})})]})}function It({game:e,ddragon:t,platform:s="LA2"}){const i=Math.max(0,Math.floor((Date.now()-e.gameStartTime)/1e3/60)),[n,o]=j.useState(new Map),[l,a]=j.useState(!0),[u,d]=j.useState(null),c=[...e.teams.blue,...e.teams.red];j.useEffect(()=>{let f=!1;async function b(){a(!0),d(null);try{const g=await(await fetch("/api/player-summaries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({platform:s,players:c.map(x=>({puuid:x.puuid,teamId:x.teamId,championId:x.championId}))})})).json();if(!f&&g.ok){const x=new Map;for(const C of g.data.players)x.set(C.puuid,C);o(x),g.data.warning&&d(g.data.warning)}}catch(v){console.error("[MatchView] batch fetch failed:",v)}finally{f||a(!1)}}return b(),()=>{f=!0}},[e.gameId,s]);const p=xe(e.teams.blue.map(f=>f.puuid),n),h=xe(e.teams.red.map(f=>f.puuid),n),y=p.confirmed+h.confirmed,m=p.possible+h.possible;return r.jsx("div",{className:"flex justify-center w-full",children:r.jsxs("div",{className:"space-y-6 min-w-[1400px]",children:[r.jsxs("div",{className:"text-center space-y-2",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-red-500/10 border border-red-500/20 mb-2",children:[r.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-red-500 animate-pulse"}),r.jsx("span",{className:"text-sm font-medium text-red-400 uppercase tracking-wider",children:"En vivo"})]}),r.jsxs("h2",{className:"text-2xl font-bold text-white",children:["Partida ",e.gameMode," ‚Äî ~",i," min"]}),r.jsxs("p",{className:"text-gray-500 text-sm",children:["Game ID: ",e.gameId]})]}),u&&r.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 rounded-lg bg-yellow-500/10 border border-yellow-500/30 text-yellow-300 text-sm",children:[r.jsxs("svg",{className:"w-5 h-5 shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),r.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),r.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),r.jsx("span",{children:u})]}),r.jsx(be,{label:"Equipo Azul",color:"blue",participants:e.teams.blue,ddragon:t,summaries:n,loading:l}),r.jsxs("div",{className:"flex items-center gap-3 py-2",children:[r.jsx("div",{className:"flex-1 h-px bg-gradient-to-r from-blue-500/30 to-transparent"}),r.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest",children:"VS"}),r.jsx("div",{className:"flex-1 h-px bg-gradient-to-l from-red-500/30 to-transparent"})]}),r.jsx(be,{label:"Equipo Rojo",color:"red",participants:e.teams.red,ddragon:t,summaries:n,loading:l}),r.jsx("div",{className:"border-t border-gray-700/50 pt-6",children:r.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:l?r.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-500 animate-pulse",children:r.jsx("div",{className:"w-40 h-6 bg-gray-700 rounded"})}):y===0&&m===0?r.jsxs("div",{className:"flex items-center gap-2 text-base text-gray-500",children:[r.jsx(ht,{className:"w-6 h-6 text-emerald-500"}),r.jsx("span",{children:"Sin smurfs detectados en esta partida"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{"data-testid":"blue-smurf-counter",className:"flex items-center gap-4 px-5 py-3 rounded-lg bg-blue-950/30 border border-blue-500/20",children:[r.jsx("span",{className:"text-sm font-bold text-blue-400 uppercase",children:"Azul"}),p.confirmed>0&&r.jsxs("span",{className:"flex items-center gap-1.5 text-sm font-bold text-red-400",children:[r.jsx(V,{className:"w-4 h-4"}),"Smurfs: ",p.confirmed]}),p.possible>0&&r.jsxs("span",{className:"flex items-center gap-1.5 text-sm font-semibold text-yellow-400",children:[r.jsx(J,{className:"w-4 h-4"}),"Posibles: ",p.possible]}),p.confirmed===0&&p.possible===0&&r.jsx("span",{className:"text-sm text-gray-500",children:"Limpios"})]}),r.jsxs("div",{"data-testid":"red-smurf-counter",className:"flex items-center gap-4 px-5 py-3 rounded-lg bg-red-950/30 border border-red-500/20",children:[r.jsx("span",{className:"text-sm font-bold text-red-400 uppercase",children:"Rojo"}),h.confirmed>0&&r.jsxs("span",{className:"flex items-center gap-1.5 text-sm font-bold text-red-400",children:[r.jsx(V,{className:"w-4 h-4"}),"Smurfs: ",h.confirmed]}),h.possible>0&&r.jsxs("span",{className:"flex items-center gap-1.5 text-sm font-semibold text-yellow-400",children:[r.jsx(J,{className:"w-4 h-4"}),"Posibles: ",h.possible]}),h.confirmed===0&&h.possible===0&&r.jsx("span",{className:"text-sm text-gray-500",children:"Limpios"})]})]})})})]})})}const jt={NOT_IN_GAME:"Este jugador no est√° en una partida actualmente.",KEY_INVALID:"La API key de Riot es inv√°lida o expir√≥. Contacta al administrador.",SPECTATOR_UNAVAILABLE:"El servicio de espectador no est√° disponible temporalmente.",SPECTATOR_DISABLED:"La funci√≥n de espectador est√° deshabilitada.",RATE_LIMITED:"Demasiadas solicitudes a la API de Riot. Intent√° de nuevo en unos segundos."};function Mt({account:e,reason:t}){const s=jt[t]??`No se puede obtener la partida: ${t}`,i=t==="KEY_INVALID"||t==="RATE_LIMITED";return r.jsxs("div",{className:"max-w-lg mx-auto text-center py-16",children:[r.jsx("div",{className:"text-7xl mb-6",children:i?"‚ö†Ô∏è":"üò¥"}),r.jsxs("h2",{className:"text-2xl font-bold text-white mb-2",children:[e?.riotId?.gameName??"Jugador"," no est√° en partida"]}),r.jsx("p",{className:"text-gray-400 mb-8 leading-relaxed",children:s}),r.jsx("a",{href:"/",className:"inline-block bg-indigo-600 hover:bg-indigo-500 text-white font-medium px-6 py-2.5 rounded-lg transition-colors",children:"‚Üê Volver al dashboard"})]})}function Ft(){return r.jsxs("div",{className:"animate-pulse space-y-6 py-4",children:[r.jsx("div",{className:"h-8 bg-gray-700 rounded w-1/3 mx-auto"}),r.jsx("div",{className:"h-4 bg-gray-700/60 rounded w-1/5 mx-auto"}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[0,1].map(e=>r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"h-6 bg-gray-700 rounded w-1/4 mx-auto"}),[...Array(5)].map((t,s)=>r.jsx("div",{className:"h-20 bg-gray-800 rounded-lg border border-gray-700"},s))]},e))})]})}const St={error:"bg-red-900/50 border-red-500/50 text-red-300",warning:"bg-yellow-900/50 border-yellow-500/50 text-yellow-300",info:"bg-blue-900/50 border-blue-500/50 text-blue-300"};function Qt({message:e,type:t="error"}){return r.jsx("div",{className:`border rounded-lg p-4 ${St[t]}`,children:r.jsx("p",{className:"font-medium text-sm",children:e})})}export{Qt as E,Pt as I,It as M,Mt as O,Ot as Q,Ft as S,Rt as a,Et as u};
